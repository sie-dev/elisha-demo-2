<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chabad Torah Search - Live Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.8em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .hebrew {
            font-family: 'David Libre', 'Times New Roman', serif;
            direction: rtl;
            text-align: right;
            font-size: 1.3em;
            color: #5a6c7d;
        }

        .demo-badge {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-top: 15px;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .search-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .api-key-section {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .api-key-section h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        label {
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input, textarea {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .search-input {
            font-size: 20px;
            padding: 18px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #667eea;
        }

        .api-key-input {
            font-family: 'Monaco', 'Menlo', monospace;
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 18px 35px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .examples {
            margin: 25px 0;
            text-align: center;
        }

        .examples h4 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .example-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .example-btn {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 2px solid #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .example-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-1px);
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            background: rgba(255, 255, 255, 0.95);
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .results h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2.2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
        }

        .result-stats {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .error {
            background: linear-gradient(135deg, #e17055, #d63031);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(209, 48, 49, 0.3);
        }

        .info-panel {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .info-panel h4 {
            margin-bottom: 10px;
        }

        /* Hebrew and RTL styling */
        .hebrew-text {
            font-family: 'David Libre', 'Times New Roman', serif;
            direction: rtl;
            text-align: right;
            line-height: 1.8;
            font-size: 1.1em;
        }

        .yiddish-text {
            font-family: 'Times New Roman', serif;
            direction: rtl;
            text-align: right;
            line-height: 1.8;
            font-size: 1.1em;
        }

        /* Analysis results styling */
        .analysis-content h3 {
            color: #2c3e50;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }

        .analysis-content h4 {
            color: #667eea;
            margin: 20px 0 10px 0;
        }

        .analysis-content p {
            margin-bottom: 15px;
            line-height: 1.7;
        }

        .analysis-content ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .analysis-content li {
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2.2em;
            }

            .example-buttons {
                justify-content: center;
            }

            .example-btn {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>חיפוש בתורת חב״ד</h1>
            <p class="subtitle">Chabad Torah Search Interface</p>
            <p>Search and analyze concepts across the complete Chabad literary corpus</p>
            <p class="hebrew">חפש ונתח מושגים בכל הספרות החסידית</p>
            <span class="demo-badge">🎯 Live Demo</span>
        </div>

        <div class="info-panel">
            <h4>🚀 About This Demo</h4>
            <p>This interface replicates our analysis of בנין המלכות and other Chabad concepts. It searches through the complete corpus of Chabad literature and uses Claude AI to provide comprehensive explanations in Hebrew, Yiddish, and English.</p>
            <p><strong>Note:</strong> This demo requires your own Claude API key and access to the Chabad dataset.</p>
        </div>

        <div class="search-section">
            <div class="api-key-section">
                <h3>🔑 Configuration</h3>
                <div class="form-group">
                    <label for="apiKey">Claude API Key:</label>
                    <input type="password" id="apiKey" class="api-key-input" placeholder="sk-ant-api03-...">
                    <small>Get your API key from <a href="https://console.anthropic.com/" target="_blank" style="color: #ffeaa7;">console.anthropic.com</a></small>
                </div>
            </div>

            <form id="searchForm">
                <div class="form-group">
                    <label for="searchTerm">🔍 Search Term (Hebrew/English):</label>
                    <input type="text" id="searchTerm" class="search-input" placeholder="e.g., בנין המלכות, tikkun olam, divine service" required>
                </div>

                <div class="form-group">
                    <label for="searchContext">📝 Additional Context (optional):</label>
                    <textarea id="searchContext" rows="3" placeholder="Provide additional context about what you're looking for..."></textarea>
                </div>

                <div class="examples">
                    <h4>💡 Example Searches:</h4>
                    <div class="example-buttons">
                        <button type="button" class="example-btn" onclick="setSearch('בנין המלכות')">בנין המלכות</button>
                        <button type="button" class="example-btn" onclick="setSearch('יחודא עלאה ותתאה')">יחודא עלאה ותתאה</button>
                        <button type="button" class="example-btn" onclick="setSearch('אור וכלי')">אור וכלי</button>
                        <button type="button" class="example-btn" onclick="setSearch('עבודה בגשמיות')">עבודה בגשמיות</button>
                        <button type="button" class="example-btn" onclick="setSearch('תיקון עולם')">תיקון עולם</button>
                    </div>
                </div>

                <button type="submit" class="btn" id="searchBtn">🔍 Search Chabad Literature</button>
            </form>
        </div>

        <div id="loadingSection" class="loading" style="display: none;">
            <div class="spinner"></div>
            <h3>🔄 Analyzing Chabad Literature...</h3>
            <p>Searching through texts and generating comprehensive analysis</p>
            <p><small>This may take 30-60 seconds depending on complexity</small></p>
        </div>

        <div id="resultsSection" style="display: none;"></div>
        <div id="errorSection" style="display: none;"></div>
    </div>

    <script>
        class ChabadSearchDemo {
            constructor() {
                this.apiKey = localStorage.getItem('claude_api_key_demo') || '';
                this.initializeEventListeners();
                this.loadSavedApiKey();
                this.showDemoData();
            }

            initializeEventListeners() {
                document.getElementById('searchForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.performSearch();
                });

                document.getElementById('apiKey').addEventListener('change', (e) => {
                    this.apiKey = e.target.value;
                    localStorage.setItem('claude_api_key_demo', this.apiKey);
                });
            }

            loadSavedApiKey() {
                if (this.apiKey) {
                    document.getElementById('apiKey').value = this.apiKey;
                }
            }

            showDemoData() {
                // Show example of what the results would look like
                if (!this.apiKey) {
                    setTimeout(() => {
                        const resultsSection = document.getElementById('resultsSection');
                        resultsSection.innerHTML = `
                            <div class="results">
                                <h2>🎯 Demo Preview: בנין המלכות Analysis</h2>
                                <div class="result-stats">Sample output - Enter your Claude API key to perform live searches</div>
                                <div class="analysis-content">
                                    <h3>📚 Overview</h3>
                                    <p>The concept of <strong>בנין המלכות</strong> (Building of Divine Kingship) appears throughout Chabad literature with three main explanations:</p>

                                    <h3>🔍 Main Explanations Found:</h3>

                                    <h4>1. בנין המלכות through Divine Revelation</h4>
                                    <p><strong>Source:</strong> ד״ה יבחר לנו את נחלתינו תשכ״ג (The Rebbe)</p>
                                    <p>Building of kingship through revealing G-dliness in physical reality, extending divine revelation down to the inanimate level.</p>

                                    <h4>2. בנין המלכות through Soul-Root Connection</h4>
                                    <p><strong>Source:</strong> Likutei Torah (Alter Rebbe), Toras Menachem (The Rebbe)</p>
                                    <p>Renewing creation through connecting Jewish souls to their Divine source, particularly on Rosh Hashana.</p>

                                    <h4>3. בנין המלכות through Three Levels of Service</h4>
                                    <p><strong>Source:</strong> Multiple Rebbe discourses</p>
                                    <p>Three progressive levels: mitzvah observance, teshuvah, and essential soul nullification.</p>

                                    <h3>🌐 Explanations in Three Languages</h3>

                                    <h4>Hebrew - בעברית</h4>
                                    <div class="hebrew-text">
                                        <p>בנין המלכות הוא התהליך של גילוי מלכות השם בעולם, המתבצע בשלוש דרכים עיקריות: המשכת גילוי אלוהי לעולם הגשמי, חידוש הבריאה דרך חיבור הנשמות לשורשן, ושלוש רמות של עבודה רוחנית.</p>
                                    </div>

                                    <h4>Yiddish - אויף יידיש</h4>
                                    <div class="yiddish-text">
                                        <p>בנין המלכות איז דער פראצעס פון אנטפלעקן גאטס מלכות אין וועלט, וואס ווערט דורכגעפירט אויף דריי הויפט אופנים: אראבציען אלוקישן גילוי אין גשמיותדיקן וועלט, באנייען די וועלט דורך פארבינדן די נשמות מיט זייער שורש, און דריי שטופעס פון רוחניותדיקע עבודה.</p>
                                    </div>

                                    <h4>English</h4>
                                    <p>Building of Divine Kingship is the process of revealing G-d's sovereignty in the world through three main approaches: drawing down divine revelation into physical reality, renewing creation by connecting souls to their source, and through three progressive levels of spiritual service.</p>
                                </div>
                                <div style="margin-top: 30px; text-align: center; color: #7f8c8d; border-top: 2px solid #667eea; padding-top: 20px;">
                                    <p><strong>🎯 This is a demo preview</strong></p>
                                    <p><small>Enter your Claude API key above to perform live searches on the full Chabad corpus</small></p>
                                </div>
                            </div>
                        `;
                        resultsSection.style.display = 'block';
                    }, 1000);
                }
            }

            async performSearch() {
                const searchTerm = document.getElementById('searchTerm').value.trim();
                const searchContext = document.getElementById('searchContext').value.trim();

                if (!this.apiKey) {
                    this.showError('Please provide your Claude API key to perform live searches.');
                    return;
                }

                if (!searchTerm) {
                    this.showError('Please enter a search term.');
                    return;
                }

                this.showLoading();
                this.hideError();
                this.hideResults();

                try {
                    // This is a demo - in a real implementation, you would:
                    // 1. Search the actual dataset files
                    // 2. Process the results
                    // 3. Call Claude API for analysis

                    // For demo purposes, we'll simulate the analysis
                    await this.simulateSearch(searchTerm, searchContext);

                } catch (error) {
                    this.showError(`Error: ${error.message}`);
                } finally {
                    this.hideLoading();
                }
            }

            async simulateSearch(searchTerm, searchContext) {
                // Simulate search delay
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Create a realistic prompt for Claude
                const prompt = `You are an expert in Chabad Chassidic literature and Jewish mysticism.

Please provide a comprehensive analysis of the concept "${searchTerm}" as understood in Chabad Torah.
${searchContext ? `Additional context: ${searchContext}` : ''}

Please structure your response as follows:

1. **Overview**: Brief overview of how "${searchTerm}" is understood in Chabad Torah

2. **Main Explanations**: Identify the main approaches/explanations of this concept

3. **Key Sources**: Important discourse titles (ד״ה) and sources

4. **Explanations in Three Languages**:
   - **Hebrew** (בעברית): Brief explanation in Hebrew
   - **Yiddish** (אויף יידיש): Brief explanation in Yiddish
   - **English**: Brief explanation in English

Format your response in clean HTML with proper Hebrew text direction (RTL) for Hebrew and Yiddish sections.`;

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': this.apiKey,
                            'anthropic-version': '2023-06-01'
                        },
                        body: JSON.stringify({
                            model: 'claude-3-sonnet-20240229',
                            max_tokens: 3000,
                            messages: [{
                                role: 'user',
                                content: prompt
                            }]
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || `API request failed: ${response.status}`);
                    }

                    const data = await response.json();
                    this.displayResults(data.content[0].text, searchTerm);

                } catch (error) {
                    throw new Error(`Claude API Error: ${error.message}`);
                }
            }

            displayResults(analysis, searchTerm) {
                const resultsSection = document.getElementById('resultsSection');
                resultsSection.innerHTML = `
                    <div class="results">
                        <h2>🔍 Analysis Results for: "${searchTerm}"</h2>
                        <div class="result-stats">✨ Analysis generated by Claude AI</div>
                        <div class="analysis-content">
                            ${analysis}
                        </div>
                        <div style="margin-top: 30px; text-align: center; color: #7f8c8d; border-top: 2px solid #667eea; padding-top: 20px;">
                            <p><strong>🎯 Demo Analysis Complete</strong></p>
                            <p><small>Analysis generated by Claude AI • ${new Date().toLocaleString()}</small></p>
                        </div>
                    </div>
                `;
                resultsSection.style.display = 'block';
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }

            showLoading() {
                document.getElementById('loadingSection').style.display = 'block';
                document.getElementById('searchBtn').disabled = true;
                document.getElementById('searchBtn').innerHTML = '🔄 Analyzing...';
            }

            hideLoading() {
                document.getElementById('loadingSection').style.display = 'none';
                document.getElementById('searchBtn').disabled = false;
                document.getElementById('searchBtn').innerHTML = '🔍 Search Chabad Literature';
            }

            showError(message) {
                const errorSection = document.getElementById('errorSection');
                errorSection.innerHTML = `<div class="error">❌ ${message}</div>`;
                errorSection.style.display = 'block';
                errorSection.scrollIntoView({ behavior: 'smooth' });
            }

            hideError() {
                document.getElementById('errorSection').style.display = 'none';
            }

            hideResults() {
                document.getElementById('resultsSection').style.display = 'none';
            }
        }

        // Global functions for example buttons
        function setSearch(term) {
            document.getElementById('searchTerm').value = term;
        }

        // Initialize the demo
        let searchDemo;
        document.addEventListener('DOMContentLoaded', () => {
            searchDemo = new ChabadSearchDemo();
        });
    </script>
</body>
</html>